/*! Yapp - v0.0.1
The MIT License (MIT)
Copyright (c) 2015 Tanveer Karim
http://www.tkarimdesign.com/
https://github.com/tanmancan/yapp
*/
var yapp=function(){"use strict";var a={};a.opts={scrollModifier:2,mobileBreakpoint:1024,containerWidth:100,containerHeight:100/3,containerOverflow:"hidden",staticImage:!1,imageWidth:100,imagePositionBottom:0,backgroundSize:"cover",marginAuto:"0 auto",cssWidthUnit:"%",cssHeightUnit:"vh",posAbs:"absolute",posRel:"relative"},a.yappContainerBlocks=document.querySelectorAll("[data-yapp-img]");var b=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;return a.ticking=!1,a.userOptions=function(b){var c={},d=a.opts.containerHeight,e=a.opts.cssHeightUnit,f=a.opts.containerWidth,g=a.opts.cssWidthUnit;if(b.getAttribute("data-yapp-height")){var h=b.getAttribute("data-yapp-height"),i=/([A-Za-z]+\w)/,j=h.split(i,2);d=j[0],e=j[1]}if(c.containerHeight=d?d:null,c.cssHeightUnit=e?e:null,b.getAttribute("data-yapp-width")){var k=b.getAttribute("data-yapp-width"),l=/([A-Za-z%]+)/,m=k.split(l,2);f=m[0],g=m[1]}return c.containerWidth=f?f:null,c.cssWidthUnit=g?g:null,c.scrollModifier=b.getAttribute("data-yapp-modifier")?a.opts.scrollModifier+b.getAttribute("data-yapp-modifier")/100:null,c.staticImage=b.hasAttribute("data-yapp-static")?!0:!1,c},a.setupContainer=function(){for(var b=null,c=null,d=0;d<a.yappContainerBlocks.length;d++)b=a.yappContainerBlocks[d],c=b.getAttribute("data-yapp-img"),a.yappContainerBlocks[d].usrOpts=a.userOptions(b),a.setupContainerStyle(b,a.yappContainerBlocks[d].usrOpts),a.setupImg(c,b,d,a.yappContainerBlocks[d].usrOpts);return this},a.setupContainerStyle=function(b,c){return b.style.width=c.containerWidth?c.containerWidth+c.cssWidthUnit:a.opts.containerWidth+a.opts.cssWidthUnit,b.style.maxWidth="100%",b.style.margin=a.opts.marginAuto,b.style.height=c.containerHeight?c.containerHeight+c.cssHeightUnit:a.opts.containerHeight+a.opts.cssHeightUnit,b.style.overflow=a.opts.containerOverflow,b.style.position=a.opts.posRel,this},a.setupImg=function(b,c,d,e){var f=document.createElement("div");return a.setupImgStyle(f,b,e),c.appendChild(f),a.yappContainerBlocks[d].yappImgBlock=f,this},a.setupImgStyle=function(b,c,d){var e=d.scrollModifier?d.scrollModifier:a.opts.scrollModifier,f=d.containerHeight?d.containerHeight:a.opts.containerHeight,g=d.cssHeightUnit?d.cssHeightUnit:a.opts.cssHeightUnit;return b.style.background="url("+c+") center center no-repeat",b.style.width=a.opts.imageWidth+a.opts.cssWidthUnit,b.style.height=f*e+g,b.style.backgroundSize=a.opts.backgroundSize,b.style.position=a.opts.posAbs,b.style.bottom=a.opts.imagePositionBottom,this},a.yappScroll=function(){for(var b=0,c=0,d=0,e=null,f=null,g=null,h=0;h<a.yappContainerBlocks.length;h++)f=a.yappContainerBlocks[h],b=f.getBoundingClientRect().height,c=f.getBoundingClientRect().bottom,d=f.getBoundingClientRect().top,g=a.yappContainerBlocks[h].yappImgBlock,d<=window.outerHeight&&c>0&&!a.yappContainerBlocks[h].usrOpts.staticImage&&window.matchMedia("(min-width: "+a.opts.mobileBreakpoint+"px)").matches&&(e=a.caclImgPos(c,d,b),"transform"in g.style?g.style.transform="translate3d(0px,"+e+"px, 0px)":"mozTransform"in g.style?g.style.mozTransform="translate3d(0px,"+e+"px, 0px)":"msTransform"in g.style?g.style.msTransform="translate3d(0px,"+e+"px, 0px)":"oTransform"in g.style?g.style.oTransform="translate3d(0px,"+e+"px, 0px)":"webkitTransform"in g.style&&(g.style.webkitTransform="translate3d(0px,"+e+"px, 0px)"));return a.ticking=!1,this},a.caclImgPos=function(a,b,c){var d=a/window.outerHeight,e=c-c*d;return e},a.requestTick=function(){return a.ticking||(b(a.yappScroll.bind(a)),a.ticking=!0),this},a.init=function(){return a.setupContainer(),a.yappScroll(),window.addEventListener("scroll",a.requestTick,!1),this},a.init(),a}();