/*! Yapp - v0.0.1
The MIT License (MIT)
Copyright (c) 2015 Tanveer Karim
http://www.tkarimdesign.com/
https://github.com/tanmancan/yapp
*/
var yapp=function(){"use strict";var a={};a.opts={scrollModifier:2,mobileBreakpoint:1024,containerWidth:100,containerHeight:100/3,containerOverflow:"hidden",imageWidth:100,imagePositionBottom:0,backgroundSize:"cover",cssWidthUnit:"%",cssHeightUnit:"vh",posAbs:"absolute",posRel:"relative"},a.yappContainerBlocks=document.querySelectorAll("[data-yapp-img]");var b=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;return a.ticking=!1,a.userOptions=function(b){var c={},d=a.opts.containerHeight,e=a.opts.cssHeightUnit;if(b.getAttribute("data-yapp-height")){var f=b.getAttribute("data-yapp-height"),g=/([A-Za-z]+\w)/,h=f.split(g,2);d=h[0],e=h[1]}return c.containerHeight=d?d:null,c.cssHeightUnit=e?e:null,c.scrollModifier=b.getAttribute("data-yapp-modifier")?a.opts.scrollModifier+b.getAttribute("data-yapp-modifier")/100:null,c},a.setupContainer=function(){for(var b=0;b<a.yappContainerBlocks.length;b++){var c=a.yappContainerBlocks[b],d=c.getAttribute("data-yapp-img");a.yappContainerBlocks[b].usrOpts=a.userOptions(c),a.setupContainerStyle(c,a.yappContainerBlocks[b].usrOpts),a.setupImg(d,c,b,a.yappContainerBlocks[b].usrOpts)}return this},a.setupContainerStyle=function(b,c){return b.style.width=a.opts.containerWidth+a.opts.cssWidthUnit,b.style.height=c.containerHeight?c.containerHeight+c.cssHeightUnit:a.opts.containerHeight+a.opts.cssHeightUnit,b.style.overflow=a.opts.containerOverflow,b.style.position=a.opts.posRel,this},a.setupImg=function(b,c,d,e){var f=document.createElement("div");return a.setupImgStyle(f,b,e),c.appendChild(f),a.yappContainerBlocks[d].yappImgBlock=f,this},a.setupImgStyle=function(b,c,d){var e=d.scrollModifier?d.scrollModifier:a.opts.scrollModifier,f=d.containerHeight?d.containerHeight:a.opts.containerHeight,g=d.cssHeightUnit?d.cssHeightUnit:a.opts.cssHeightUnit;return b.style.background="url("+c+") center center no-repeat",b.style.width=a.opts.imageWidth+a.opts.cssWidthUnit,b.style.height=f*e+g,b.style.backgroundSize=a.opts.backgroundSize,b.style.position=a.opts.posAbs,b.style.bottom=a.opts.imagePositionBottom,this},a.yappScroll=function(){for(var b=0;b<a.yappContainerBlocks.length;b++){var c=a.yappContainerBlocks[b],d=c.getBoundingClientRect().height,e=c.getBoundingClientRect().bottom,f=c.getBoundingClientRect().top,g=a.caclImgPos(e,f,d),h=a.yappContainerBlocks[b].yappImgBlock;f<=window.outerHeight&&window.matchMedia("(min-width: "+a.opts.mobileBreakpoint+"px)").matches&&("transform"in h.style?h.style.transform="translate3d(0px,"+g+"px, 0px)":"mozTransform"in h.style?h.style.mozTransform="translate3d(0px,"+g+"px, 0px)":"msTransform"in h.style?h.style.msTransform="translate3d(0px,"+g+"px, 0px)":"oTransform"in h.style?h.style.oTransform="translate3d(0px,"+g+"px, 0px)":"webkitTransform"in h.style&&(h.style.webkitTransform="translate3d(0px,"+g+"px, 0px)"))}return a.ticking=!1,this},a.caclImgPos=function(a,b,c){var d=a/window.outerHeight,e=c-c*d;return e},a.requestTick=function(){return a.ticking||(b(a.yappScroll.bind(a)),a.ticking=!0),this},a.init=function(){return a.setupContainer(),a.yappScroll(),window.addEventListener("scroll",a.requestTick,!1),this},a.init(),a}();window.addEventListener("click",console.log(yapp),!1);