/*! Yapp - v0.0.1
The MIT License (MIT)
Copyright (c) 2015 Tanveer Karim
http://www.tkarimdesign.com/
https://github.com/tanmancan/yapp
*/
var yapp=function(){"use strict";var a={};a.opts={scrollModifier:2,mobileBreakpoint:1024,container:{width:100,height:100/3,overflow:"hidden"},image:{static:!1,width:100,positionBottom:0,backgroundSize:"cover"},style:{marginAuto:"0 auto",cssWidthUnit:"%",cssHeightUnit:"vh",posAbs:"absolute",posRel:"relative"}},a.yappContainerBlocks=document.querySelectorAll("[data-yapp-img]");var b=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;return a.ticking=!1,a.userOptions=function(b){var c={},d=a.opts.container.height,e=a.opts.style.cssHeightUnit,f=a.opts.container.width,g=a.opts.style.cssWidthUnit;if(c.style={},c.container={},c.image={},b.getAttribute("data-yapp-height")){var h=b.getAttribute("data-yapp-height"),i=/([A-Za-z]+\w)/,j=h.split(i,2);d=j[0],e=j[1]}if(c.containerHeight=d||null,c.style.cssHeightUnit=e||null,b.getAttribute("data-yapp-width")){var k=b.getAttribute("data-yapp-width"),l=/([A-Za-z%]+)/,m=k.split(l,2);f=m[0],g=m[1]}return c.containerWidth=f?f:null,c.style.cssWidthUnit=g?g:null,c.scrollModifier=b.getAttribute("data-yapp-modifier")?a.opts.scrollModifier+b.getAttribute("data-yapp-modifier")/100:null,c.image.static=!!b.hasAttribute("data-yapp-static"),c},a.setupContainer=function(){for(var b=null,c=null,d=0;d<a.yappContainerBlocks.length;d++)b=a.yappContainerBlocks[d],c=b.getAttribute("data-yapp-img"),a.yappContainerBlocks[d].usrOpts=a.userOptions(b),a.setupContainerStyle(b,a.yappContainerBlocks[d].usrOpts),a.setupImg(c,b,d,a.yappContainerBlocks[d].usrOpts);return this},a.setupContainerStyle=function(b,c){return b.style.width=c.containerWidth?c.containerWidth+c.style.cssWidthUnit:a.opts.container.width+a.opts.style.cssWidthUnit,b.style.maxWidth="100%",b.style.margin=a.opts.style.marginAuto,b.style.height=c.containerHeight?c.containerHeight+c.style.cssHeightUnit:a.opts.container.height+a.opts.style.cssHeightUnit,b.style.overflow=a.opts.container.overflow,b.style.position=a.opts.style.posRel,this},a.setupImg=function(b,c,d,e){var f=document.createElement("div");return a.setupImgStyle(f,b,e),c.appendChild(f),a.yappContainerBlocks[d].yappImgBlock=f,this},a.setupImgStyle=function(b,c,d){var e=d.scrollModifier?d.scrollModifier:a.opts.scrollModifier,f=d.containerHeight?d.containerHeight:a.opts.container.height,g=d.style.cssHeightUnit?d.style.cssHeightUnit:a.opts.style.cssHeightUnit;return b.style.background="url("+c+") center center no-repeat",b.style.width=a.opts.image.width+a.opts.style.cssWidthUnit,b.style.height=f*e+g,b.style.backgroundSize=a.opts.image.backgroundSize,b.style.position=a.opts.style.posAbs,b.style.bottom=a.opts.image.positionBottom,this},a.yappScroll=function(){for(var b,c,d=0;d<a.yappContainerBlocks.length;d++)c=a.yappContainerBlocks[d].yappImgBlock,b=c.imagePosition,c.boundariesTest&&("transform"in c.style?c.style.transform="translate3d(0,"+b+"px, 0)":"mozTransform"in c.style?c.style.mozTransform="translate3d(0,"+b+"px, 0)":"msTransform"in c.style?c.style.msTransform="translate3d(0,"+b+"px, 0)":"oTransform"in c.style?c.style.oTransform="translate3d(0,"+b+"px, 0)":"webkitTransform"in c.style&&(c.style.webkitTransform="translate3d(0,"+b+"px, 0)"));return a.ticking=!1,this},a.calcScroll=function(){for(var c=null,d=null,e=0;e<a.yappContainerBlocks.length;e++)c=a.yappContainerBlocks[e],d=c.yappImgBlock,a.caclImgPos(c,d);if(!a.ticking){var f=a.yappScroll.bind(a);b(f),a.ticking=!0}return this},a.caclImgPos=function(b,c){var d=0,e=0,f=0,g=0,h=0,i=0,j=!1;return f=b.getBoundingClientRect().height,g=b.getBoundingClientRect().bottom,h=b.getBoundingClientRect().top,i=c.getBoundingClientRect().height,j=h<=window.innerHeight&&g>0&&!b.usrOpts.image.static&&window.innerWidth>=a.opts.mobileBreakpoint,j&&(c.boundariesTest=j,d=g/window.innerHeight,e=f-f*d,c.imagePosition=(e-f/i*e).toFixed(2)),this},a.init=function(){a.setupContainer(),a.calcScroll();var b=a.calcScroll.bind(a);return window.addEventListener("scroll",b,!1),this},a.init(),a}();